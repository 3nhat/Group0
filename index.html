<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, height=device-height, maximum-scale=1.0, user-scalable=no">
	<meta charset="utf-8">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>	


	<style>
		body, .Program{ overflow: hidden;	margin:0; width: 100%; height: 100vh;}
        body::-webkit-scrollbar, .Program::-webkit-scrollbar { display: none;}
		body, .Program { -ms-overflow-style: none; scrollbar-width: none; }
        
        #Program00 {width: 100%; height: 100vh}

		.HuongDan {
          	z-index: 100;
          	width: 100%; height: 100vh; 
          	background: orange; 
          	position: fixed; 
          	top: 0; left: 0; 
          	padding-top: 48vh; padding-bottom: 48vh;
          	text-align: center; 
			display: none;
        }
		  	

	</style>
</head>

<body id="body" class="body">

	<div id="Audio" style="display:none">
		<audio id="myAudio1"><source src="https://3nhat.github.io/Audio/click.mp3" type="audio/mpeg"></audio>
		<audio id="myAudio2"><source src="https://3nhat.github.io/Audio/sai.mp3" type="audio/mpeg"></audio>
		<audio id="myAudio1"><source src="https://3nhat.github.io/Audio/trung.mp3" type="audio/mpeg"></audio>
	</div>
    	<div id="HuongDan" class="HuongDan">
      		Do chương trình sử dụng tính năng tracking đơn hàng nên bạn phải bật định vị và cho phép truy cập định vị, chương trình mới hoạt động. Xin cảm ơn
    	</div>
    	<div id="Geo" style="display: none;"></div>
    	<div id="container_loader">
	  	<div class="main_loader" >
        		<div class="loader" onclick="EID('container_loader').style.display = 'none'"></div>
	  	</div>
    	</div>
    
    	<div id="container_alert"></div>
    
    	<div id="Program00" class="Program" style="display: none;"></div>


    <script>
	    
var test = "w3s";
var DefaultPage = "Express1";  //"Group";
var batdau = true;

function EID(NameID) {return document.getElementById(NameID);}
console.log = function(msg){
	var arr = msg.split("]QQQ[");
	obj = JSON.stringify(arr[0]); console.clear();
	if (arr[1] != "") { window[arr[2]](obj); }
}

window.addEventListener('DOMContentLoaded', (event) => { window['toado'](); });


window.window['toado'] = function toado() {
	EID("Geo").innerHTML=="";
	getLocation();
	function getLocation() {
        if (navigator.geolocation) {
        	navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
        	alert("Geolocation is not supported by this browser.");
        }
  }
        
  function showPosition(position) {
    EID("Geo").innerHTML = position.coords.latitude + "][" + position.coords.longitude;
    if (EID("Geo").innerHTML!="") {
      if(batdau==true) {
        EID("HuongDan").style.display = "none";
        batdau = false;

		window.window["Begin"] = function Begin() {
            var x0='get';
      		var x1='slag';    
			
            async function RunFirstBegin() {
  				let promise = new Promise((resolve, reject) => {
    				setTimeout(function(){
                    	
						var url = GetLink();
                		if (x0=='get') { QuangBegin(resolve, url, x1); }
    				},5);
  				});

  				let result = await promise; 

  				if (result=="done!") { RunAfterBegin(); }
			}
            
            function QuangBegin(resolve, url) {
				window.window[x1];
              	
				$.getJSON(url, function (json) {
					resolve("done!");
              		window[x1] = json.records.map(doc => Object.values(doc));
				    window[x1].map(function mapper(s) {
  						if (Array.isArray(s)) {
    						return s.map(mapper);
  						} else {
							return s.toString().trim();
  						}
					});
				});
			}
            
            function RunAfterBegin() {
		    		alert(window[x1]);
				this[window[x1][0][1]] = new Function('return ' + window[x1][0][3])();
      				this[window[x1][0][1]]();
			}
            
            
            function GetLink() {
						var arr1 = [
             ['AKfycbw8Uc', 'np_fb0', 'GDkg4oYf', 'fP9GJ', 'DwSeGEwsS', 'qJT12Uuv', 'Vsh8CQ1dU'],
['AKfycbygb-', 'BCkkPH', 'GgPKWE5U', 'jBLI6', 'qL-dC3ily', 'j5N2Zi'],
['AKfycbz_x3', 'pT9792', 'hA6_cNtY', 'JgoGP', '2Ez0vXF3N', 'Lt4EJu-A'],
['AKfycby3wK', 'kQa0Y7', 'b9n16dS9', 'mj7vG', 'ExEqTz7Dl', 'oNyMRs'],
['AKfycbxTTa', 'LGsqUK', 'I84KMZk7', 'TQRbH', 'AgGWmupmD', 'NYN1FlIQ'],
['AKfycbyFN0', 'Dg2yNi', '3gU32aNH', 'nR9j6', 'SLx7YsZsT', 'CP-TQ1Xg'],
['AKfycbwQiv', 'cbzAr-', 'nDL4Dm5n', '8Yg0y', '_zHGIIeNa', 'grCfk7ow'],
['AKfycbzG6k', '3db8wz', 'uDr8osP3', 'g1EWY', 'WZD1vr_BF', 'WDF0zh'],
['AKfycbyZ0n', 'EjfMeL', 'CvWWyBzJ', 'XpBIw', 'L-Ey3Fz5T', 'tFB054'],
['AKfycbzq5D', 'yl9_Ug', 'Th6r90oI', '4PYzR', 'zWwbASbsZ', '4JpjQZFA'],
['AKfycbyaSx', 'LfzClh', '5lzzSNV6', '_h8Fe', 'RZOpckU6K', 'tgYs2C9w'],
['AKfycbzKUn', 'LZPfDV', 'scy5oLBR', 'i_VVi', 'K7Rc4VIT9', 'QszoB6'],
['AKfycbywWr', 'gxjUzI', '2R37OAWh', 'Vuw4T', 'qIPS6p9U6', 'BUk8Jr7g'],
['AKfycbwDLI', '6d5-Q1', 'zYYvfn2Z', 'cGTj8', 'MBKFKKfs1', 'jzWk8ItQ'],
['AKfycbzBUB', 'HufCgz', 'fjPApLdS', 'l_-be', 'g1DkRep0U', 'Jt8WcPhQ'],
['AKfycbwX-X', 'Y0FA87', 'wgfTFgXt', 'xeeVV', 'ckPWAw-Vg', '31eeI5'],
['AKfycbzUSh', 'nK9R_j', '-AsKnkeu', 'pfaz8', 'cxcjyCAWH', 'wh6lp5xg'],
['AKfycbynUc', 'Crv3jh', 'VKDmCQNJ', 'aeihA', 'b6Avi1VeJ', 'QrFhs7'],
['AKfycbwNyZ', 'XrgTvq', 'RpDkPjMx', 'keDGh', 'xTROrNMrx', 'sX34oy'],
['AKfycbzKZj', 'UGkvPU', 'jXifP4XW', 'F4MBB', '0SanMh-T9', 'jnglBCWA'],
['AKfycby4Tj', 'okHViF', 'FmPkoGWh', '6Fn4Y', 'ob34RcKeZ', 'sjsxtxQg'],
['AKfycbyjqy', '0cK8Jw', '_9HT-_9d', 'KqF1L', 'Q4aUtSvSf', 'aJ2kWp'],
['AKfycbzKoT', 'gZFAwD', 'V0AhOKjf', '6H8hi', 'kSAU2bpKg', 'ESQO4u']

							];
			
				var rand = Math.floor(Math.random() * (arr1.length-1));
				var script_url="";
				for (var i=0;i<arr1[rand].length;i++) {
					script_url = script_url + arr1[rand][i];
				}
				script_url =  "https://script.google.com/macros/s/" + script_url + "/exec";
				var linkexec = "https://script.google.com/macros/s/AKfycbyU5sTwq9NyhycuxnJAc0EVoqcrrkGE1X5lkAfahV5h0Be7v_hz/exec";

				var str1 = window.location.href;	
			
      			if (test=="w3s") {
							var link = script_url;
      			} else {
      				var link = (str1.indexOf('https://3nhat.github.io/')>=0) ? script_url : "";
      			}
            	
				if (link=="") {
					EID("HuongDan").innerHTML = "Chương trình không được chạy từ trang chính. Cám ơn bạn đã quan tâm đến chương trình";
					return link;
				}
            
				var timthay = str1.indexOf('zalo');
				if (timthay>0) {
					for (var j=timthay; j>=0; j--) {
						var v = str1.substring(j,j+1);
						if (v=="?" || v=="&") {
							str1 = str1.substring(0,j);
							break;
						}
					}
				}
        		var str4 = (timthay>0) ? "]QQQ[zalo" : "";
            	var strArr = str1.split('ID=');

				str1 = strArr[0];
      			var str2="";
      			if (strArr.length>1) {
      				str2 = "ID=" + strArr[1] + "]QQQ[";
      			} 
            
      		  	strArr = str1.split('P=');
            
      			var str3 = (strArr.length>1) ? strArr[1] : "Pr01";
      			var str3 = (strArr.length>1) ? strArr[1] : DefaultPage;
            
				//link = script_url + "?P=" + str3 + "&para1=F001" + "&para2=" + str3 + "]QQQ[100nBtoDN7MupVz8lYQZzZw5zdG_9TgbFKJmuG007OTI]QQQ[" + str3 + "]QQQ[select A, B, C, D" + str2 + str4;
				link = script_url + "?P=" + str3 + "&para1=F001" + "&para2=" + "none]QQQ[func]QQQ[GetDataServer";

				return link;
			}
            
            RunFirstBegin();
            
        }
        
        
        window["Begin"](); 
      }
    }
        	
  }  
}




	    
	    
  </script>

</body>
</html>
